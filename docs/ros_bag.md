# rosbag
- bagファイルを作成するためのツールです。
- 時間と共に、出版されたROSトピックをデータとして記録することができます。
- 同じ実験を効率的に何度も繰り返すことができます。
    - 同じ出力を完全に再現することができます。

## 記録
- 記録したいノードを立ち上げます。
    ```
    ros2 launch assignment_package assignment_launch
    ```

- トピックの一覧を確認します。
    ```
    $ ros2 topic list
    ```

- 記録したいトピックを選択しながらrecordサブコマンドを実行します。
    ```
    《記法》
    $ ros2 bag record -o バッグファイル名 トピック名
    《実例》
    $ ros2 bag record -o test_bag test_topic
    ```
    - オプションoでバッグファイルに名前を付けることができます。

- Ctrl＋cで記録を終了します。bagファイルはrecordサブコマンドを実行したディレクトリーに生成されます。

- 他のノードも停止します。


## 確認
- infoコマンドで確認します。
    ```
    《記法》
    $ ros2 bag info バッグファイル名
    《実例》
    $ rosbag info test_bag
    ```
    - 記録したかったトピックが正しく記録されているかを確認することができます。
    - 記録の長さなども確認することができます。

## 再生
- rosbagファイルを再生します。
    ```
    《記法》
    $ ros2 bag play バッグファイル名
    《実例》
    $ ros2 bag play test_bag
    ```
    - オプションx（--rate）で再生速度の倍率を設定できます。速くすることも遅くすることもできます。
        - 再生速度を遅くすることで、ロースペックのPCでもシミュレーションを実行することができます。また、デバッグが行いやすくなるという利点もあります。
        - 逆に速くすることで、シミュレーション実験を効率的に実施することができます。

- `topic echo`コマンドで正常に出力されていることを確認してください。
    ```
    $ ros2 topic echo test_topic
    ```

[このページのトップへ](#)

[情報科学実験用サイトのトップへ](https://stl-apu.github.io/laboratory_experiments/)
